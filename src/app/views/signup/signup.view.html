<div class="flex flex-col left-0 top-0 m-0 w-full h-screen overflow-x-auto">
  <div
    class="flex flex-col p-5 m-auto rounded-xl! styleBorderSolidLite border-4! bg-transparent backdrop-blur w-full min-[400px]:w-10/12 sm:w-[400px] text-center"
  >
    <div class="flex flex-col text-left! gap-y-3" [formGroup]="regForm">
      <div class="flex flex-col gap-y-1">
        <label class="styleLabel">Email</label>
        <input class="styleField bg-transparent!" type="email" formControlName="email" required />

        @if (isInvalid("email")) {
          @if (f["email"].errors?.["required"]) {
            <span class="text-red-500">Field 'Email' should not be empty</span>
          } @else if (f["email"].errors?.["email"]) {
            <span class="text-red-500">Field 'Email' contains an incorrect email address</span>
          } @else if (f["email"].errors?.["pattern"]) {
            <span class="text-red-500">Field 'Email' contains an invalid mailbox domain</span>
          }
        }
      </div>

      <div class="flex flex-col gap-y-1">
        <label class="styleLabel">Username</label>
        <input class="styleField bg-transparent!" type="text" formControlName="username" required />

        @if (isInvalid("username")) {
          @if (f["username"].errors?.["required"]) {
            <span class="text-red-500">Field 'Username' should not be empty</span>
          } @else if (f["username"].errors?.["pattern"]) {
            <span class="text-red-500">Field 'Username' must contain only Latin characters.</span>
          }
        }
      </div>

      <div class="flex flex-col gap-y-1">
        <label class="styleLabel">Password</label>

        <div class="relative flex flex-row items-center">
          <input
            class="styleField bg-transparent! w-full"
            [type]="isShowPassword() ? 'text' : 'password'"
            formControlName="password"
          />
          <button class="absolute right-1 h-7.5!">
            @if (isShowPassword()) {
              <mat-icon
                class="w-7.5! h-full! text-3xl! text-red-500!"
                fontIcon="visibility_off"
                (click)="isShowPassword.set(false)"
              />
            } @else {
              <mat-icon
                class="w-7.5! h-full! text-3xl! text-red-500!"
                fontIcon="visibility"
                (click)="isShowPassword.set(true)"
              />
            }
          </button>
        </div>

        @if (isInvalid("password")) {
          @if (f["password"].errors?.["required"]) {
            <span class="text-red-500">Field 'Password' should not be empty</span>
          } @else if (f["password"].errors?.["minlength"]) {
            <span class="text-red-500">Field 'Password' must be at least 6 characters long</span>
          }
        }
      </div>

      <div class="flex flex-col gap-y-1">
        <label class="styleLabel">Confirm Password</label>

        <div class="relative flex flex-row items-center">
          <input
            class="styleField bg-transparent! w-full"
            [type]="isShowConfirmPassword() ? 'text' : 'password'"
            formControlName="confirm_password"
          />
          <button class="absolute right-1 h-7.5!">
            @if (isShowConfirmPassword()) {
              <mat-icon
                class="w-7.5! h-full! text-3xl! text-red-500!"
                fontIcon="visibility_off"
                (click)="isShowConfirmPassword.set(false)"
              />
            } @else {
              <mat-icon
                class="w-7.5! h-full! text-3xl! text-red-500!"
                fontIcon="visibility"
                (click)="isShowConfirmPassword.set(true)"
              />
            }
          </button>
        </div>

        @if (isInvalid("confirm_password")) {
          @if (f["confirm_password"].errors?.["required"]) {
            <span class="text-red-500">Field 'Confirm password' should not be empty</span>
          } @else if (f["confirm_password"].errors?.["minlength"]) {
            <span class="text-red-500"
              >Field 'Confirm password' must be at least 6 characters long</span
            >
          } @else if (f["confirm_password"].errors?.["passwordMismatch"]) {
            <span class="text-red-500">Passwords don't match</span>
          }
        }
      </div>

      <button class="styleButInfo" (click)="submitted() == false && send()">
        @if (submitted()) {
          <span>...Loading</span>
        } @else {
          <span>Register</span>
        }
      </button>

      <div class="flex flex-col gap-x-2">
        <span>Have you already registered?</span>
        <span class="styleLinkRedir" [routerLink]="['/login']">Login</span>
      </div>
    </div>
  </div>
</div>
